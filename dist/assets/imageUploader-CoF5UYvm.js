import{g as F,a as k}from"./main-CIk-r9F8.js";function T(e){if(e==null||e==="")return null;const t=String(e).trim();return/^\d+$/.test(t)?parseInt(t,10):null}function I(e){if(e==null||e==="")return null;const t=String(e).trim();return/^\d+(\.\d)?$/.test(t)?parseFloat(t):null}function L(e){if(e==null||e==="")return!1;const t=String(e).trim();return/^([1-9]\d*|0)$/.test(t)}function v(e){if(e==null||e==="")return!1;const t=String(e).trim();return/^([1-9]\d*|0)(\.\d)?$/.test(t)}function N(e){var l;const t=T(e.no);if(t===null||t<1||t>150)return"ğŸ“› ìˆœë²ˆì€ 1ë¶€í„° 150 ì‚¬ì´ì˜ ì •ìˆ˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.";if(!((l=e.name)!=null&&l.trim()))return"ğŸ“› ë©”ë‰´ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";if(!e.category)return"ğŸ“› ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.";const n=e.price;if(!(n!=null&&n.trim())||!L(n))return"ğŸ“› ê°€ê²©ì„ ì •ìˆ˜ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.";if(e.cupYn==="no"&&!e.cup)return"ğŸ“› ì»µ ì¢…ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.";if(e.cupYn==="no"&&e.iceYn==="yes"&&!v(e.iceTime))return"ğŸ“› ì–¼ìŒ ì‹œê°„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";const s=I(e.iceTime);if(s==null||s<0||s>10)return"ğŸ“› ì–¼ìŒ ì‹œê°„ì€ 0ë¶€í„° 10ê¹Œì§€ì˜ ì†Œìˆ˜ ì²«ì§¸ ìë¦¬ê¹Œì§€ ì…ë ¥í•´ì£¼ì„¸ìš”.";const o=I(e.waterTime);if(o==null||o<0||o>10)return"ğŸ“› ë¬¼ ì‹œê°„ì€ 0ë¶€í„° 10ê¹Œì§€ì˜ ì†Œìˆ˜ ì²«ì§¸ ìë¦¬ê¹Œì§€ ì…ë ¥í•´ì£¼ì„¸ìš”.";if(e.cupYn==="no"&&e.items.length===0)return"ğŸ“› ìŒë£Œìƒí’ˆì€ í•­ëª©ì„ ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.";if(e.cupYn==="no")for(let c=0;c<e.items.length;c++){const r=e.items[c];if(!r.type)return`ğŸ“› ${c+1}ë²ˆì§¸ ì¬ë£Œì˜ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.`;if(r.type==="coffee"&&!(parseFloat(r.value1)>0||parseFloat(r.value2)>0))return"ğŸ“› ì›ë‘1, ì›ë‘2 ì¤‘ í•œê°œì˜ ê°’ì€ ì…ë ¥í•´ì•¼í•©ë‹ˆë‹¤.";if(r.type!=="coffee"){if(!v(r.value1))return`ğŸ“› ${c+1}ë²ˆì§¸ ì¬ë£Œì˜ ì²« ë²ˆì§¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.`;if(!v(r.value2))return`ğŸ“› ${c+1}ë²ˆì§¸ ì¬ë£Œì˜ ë‘ ë²ˆì§¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.`}if(!v(r.value3))return`ğŸ“› ${c+1}ë²ˆì§¸ ì¬ë£Œì˜ ì„¸ ë²ˆì§¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.`;if(r.type!=="garucha"&&!v(r.value4))return`ğŸ“› ${c+1}ë²ˆì§¸ ì¬ë£Œì˜ ë„¤ ë²ˆì§¸ ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.`}return null}function C(e){for(let t=0;t<e.items.length;t++){const n=e.items[t],s=o=>o>=1&&o<=6&&/^[0-9]+(\.[0-9]{1,2})?$/.test(String(o));if(n.type==="coffee"){if(parseFloat(n.value1)>0){if(parseFloat(n.value2))return"â˜• ê·¸ë¼ì¸ë”1 ì‚¬ìš© ì‹œ, ê·¸ë¼ì¸ë”2ëŠ” 0ì´ì–´ì•¼ í•©ë‹ˆë‹¤.";if(!s(n.value1))return"â˜• ê·¸ë¼ì¸ë”1 ê°’ì€ 1~6 ì´ˆ ë²”ìœ„ì˜ ì†Œìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤."}if(parseFloat(n.value2)>0){if(parseFloat(n.value1))return"â˜• ê·¸ë¼ì¸ë”2 ì‚¬ìš© ì‹œ, ê·¸ë¼ì¸ë”1ì€ 0ì´ì–´ì•¼ í•©ë‹ˆë‹¤.";if(!s(n.value2))return"â˜• ê·¸ë¼ì¸ë”2 ê°’ì€ 1~6 ì´ˆ ë²”ìœ„ì˜ ì†Œìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤."}}if(n.type==="garucha"&&parseFloat(n.value2)>0&&parseFloat(n.value3)<parseFloat(n.value2)*10)return`ğŸµ ê°€ë£¨ì°¨ í•«ì›Œí„°(${n.value3})ëŠ” ì¶”ì¶œì‹œê°„(${n.value2})ì˜ 10ë°° ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.`;if(n.type==="syrup"&&parseFloat(n.value3)<20&&parseFloat(n.value4)<20)return"ğŸ¯ ì‹œëŸ½ í•«ì›Œí„° ë˜ëŠ” íƒ„ì‚°ìˆ˜ ì¤‘ í•˜ë‚˜ëŠ” 20 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."}return null}function g(e,t){var l;const n=(t==null?void 0:t.type)||"",s=document.createElement("div");s.className="boxStyle gr mb20 item",s.innerHTML=`
    <h2 class="mb10">${e+1}í•­ëª©</h2>
    <p class="fs14">íƒ€ì…</p>
    <div class="btnFlex mb20">
      <select class="popup-select mb0 item-type-select">
        <option value="">ì„ íƒ</option>
        <option value="coffee" ${n==="coffee"?"selected":""}>ì»¤í”¼</option>
        <option value="garucha" ${n==="garucha"?"selected":""}>ê°€ë£¨ì°¨</option>
        <option value="syrup" ${n==="syrup"?"selected":""}>ì‹œëŸ½</option>
      </select>
      <button class="btn red delete-btn">ì‚­ì œ</button>
    </div>
    ${M(n,t)}
  `,(l=s.querySelector(".delete-btn"))==null||l.addEventListener("click",()=>s.remove());const o=s.querySelector(".item-type-select");return o.addEventListener("change",()=>{const c=o.value,r=s.parentElement,i=g(e,{type:c});r.replaceChild(i,s)}),U(s),s}function M(e,t={}){return e==="coffee"?`
      <div class="input-group col mb20">
        <div><p class="fs14">ì›ë‘ 1</p><input type="text" value="${t.value1||"0"}" /></div>
        <div><p class="fs14">ì›ë‘ 2</p><input type="text" value="${t.value2||"0"}" /></div>
      </div>
      <div class="input-group col">
        <div><p class="fs14">ì¶”ì¶œëŸ‰</p><input type="text" value="${t.value3||"0"}" /></div>
        <div><p class="fs14">ì˜¨ìˆ˜</p><input type="text" value="${t.value4||"0"}" /></div>
      </div>
    `:e==="garucha"?`
      <div class="input-group col mb20">
        <div><p class="fs14">ì°¨ ì¢…ë¥˜</p><input type="text" value="${t.value1||"0"}" /></div>
        <div><p class="fs14">ì¶”ì¶œ ì‹œê°„</p><input type="text" value="${t.value2||"0"}" /></div>
      </div>
      <div class="input-group col">
        <div><p class="fs14">ì˜¨ìˆ˜</p><input type="text" value="${t.value3||"0"}" /></div>
        <div></div>
      </div>
    `:e==="syrup"?`
      <div class="input-group col mb20">
        <div><p class="fs14">ì‹œëŸ½ ì¢…ë¥˜</p><input type="text" value="${t.value1||"0"}" /></div>
        <div><p class="fs14">íŒí”„ ì‹œê°„</p><input type="text" value="${t.value2||"0"}" /></div>
      </div>
      <div class="input-group col">
        <div><p class="fs14">ì˜¨ìˆ˜</p><input type="text" value="${t.value3||"0"}" /></div>
        <div><p class="fs14">íƒ„ì‚°ìˆ˜</p><input type="text" value="${t.value4||"0"}" /></div>
      </div>
    `:""}function U(e){const t=e.querySelectorAll("input, select");for(const n of t)n.addEventListener("blur",()=>{var a,p,u,d;const s=e,o=s.querySelector(".item-type-select").value,l=s.querySelectorAll("input"),r={items:[{type:o,value1:(a=l[0])==null?void 0:a.value,value2:(p=l[1])==null?void 0:p.value,value3:(u=l[2])==null?void 0:u.value,value4:(d=l[3])==null?void 0:d.value}]},i=C(r);i&&window.showToast(i,2e3,"error")})}const y=document.getElementById("logoPreview"),q="/img/";function m(e,t){const n=e.value;n?(t.src=`${q}${n}.png`,t.style.display="block"):t.style.display="none"}function h(e,t){e.addEventListener("change",()=>{const n=(y==null?void 0:y.src)||"";if(!(n.startsWith("blob:")||n.startsWith("data:")||n.includes("s3.ap-northeast-2.amazonaws.com"))){alert("ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”."),e.value="";return}m(e,t)})}const B=document.getElementById("state-new"),b=document.getElementById("state-event"),E=document.getElementById("state-best"),w=document.getElementById("overlay-new"),S=document.getElementById("overlay-event"),x=document.getElementById("overlay-best");h(B,w);h(b,S);h(E,x);async function D(e){const t=F();if(!t){alert("ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");return}const n=await k(`/model_user_setting?func=get-user&userId=${t.userId}`),{user:s}=await n.json();A(s.category),e&&R(e)}function A(e){const t=document.getElementById("menu-category");t&&(t.innerHTML='<option value="">ì„ íƒ</option>',e.forEach(({name:n,item:s})=>{const o=document.createElement("option");o.value=s,o.textContent=n,t.appendChild(o)}))}function R(e){var r,i,a,p;const t=(r=e.image)==null?void 0:r.split("\\").pop(),n=encodeURIComponent(t??""),s=`https://model-narrow-road.s3.ap-northeast-2.amazonaws.com/model/${e.userId}/${n}`,o=document.getElementById("logoPreview");o&&(o.src=s,o.style.display="block");const l=document.getElementById("fileName");l&&(l.textContent=t),document.getElementById("menu-no").value=String(e.no),document.getElementById("menu-name").value=e.name,document.getElementById("menu-price").value=e.price,document.getElementById("ice-time").value=e.iceTime,document.getElementById("water-time").value=e.waterTime;const c=document.getElementById("menu-category");c&&(c.value=e.category),document.querySelectorAll('input[name="cup"]').forEach(u=>u.checked=u.value===e.cup),document.querySelectorAll('input[name="iceYn"]').forEach(u=>u.checked=u.value===e.iceYn),document.querySelectorAll('input[name="empty"]').forEach(u=>u.checked=u.value===e.empty),document.getElementById("state-new").value=((i=e.state)==null?void 0:i.new)||"",document.getElementById("state-event").value=((a=e.state)==null?void 0:a.event)||"",document.getElementById("state-best").value=((p=e.state)==null?void 0:p.best)||"",m(B,w),m(b,S),m(E,x),V(e.items)}function V(e){const t=document.getElementById("items-container");t.innerHTML="",e.forEach((n,s)=>{const o=g(s,n);t.appendChild(o)})}var $;($=document.getElementById("addItemBtn"))==null||$.addEventListener("click",()=>{const e=document.getElementById("items-container"),t=e.children.length,n=g(t);e.appendChild(n)});function H(e,t,n,s=600,o=600,l=2*1024*1024){return new Promise((c,r)=>{var u;const i=(u=e.files)==null?void 0:u[0];if(!i)return r("íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.");if(i.size>l)return e.value="",alert(`âŒ íŒŒì¼ í¬ê¸°ëŠ” ìµœëŒ€ ${l/1024/1024}MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.`),r("íŒŒì¼ ìš©ëŸ‰ ì´ˆê³¼");const a=new Image,p=URL.createObjectURL(i);a.src=p,a.onload=()=>{if(a.width>s||a.height>o)return e.value="",alert(`âŒ ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆëŠ” ${s}x${o} ì´í•˜ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.`),r("ì´ë¯¸ì§€ í¬ê¸° ì´ˆê³¼");t.src=p,t.style.display="block",n&&(n.textContent=i.name);const d=new FileReader;d.onload=()=>{const f=d.result;t.src=f,t.style.display="block",n&&(n.textContent=i.name),c({base64:f,fileName:i.name,dataUrl:f})},d.onerror=r,d.readAsDataURL(i)},a.onerror=()=>r("ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨")})}export{C as a,H as h,D as r,N as v};
