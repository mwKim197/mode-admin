import{g as F,a as k}from"./main-CIk-r9F8.js";function T(e){if(e==null||e==="")return null;const t=String(e).trim();return/^\d+$/.test(t)?parseInt(t,10):null}function I(e){if(e==null||e==="")return null;const t=String(e).trim();return/^\d+(\.\d)?$/.test(t)?parseFloat(t):null}function L(e){if(e==null||e==="")return!1;const t=String(e).trim();return/^([1-9]\d*|0)$/.test(t)}function v(e){if(e==null||e==="")return!1;const t=String(e).trim();return/^([1-9]\d*|0)(\.\d)?$/.test(t)}function N(e){var l;const t=T(e.no);if(t===null||t<1||t>150)return"📛 순번은 1부터 150 사이의 정수로 입력해주세요.";if(!((l=e.name)!=null&&l.trim()))return"📛 메뉴 이름을 입력해주세요.";if(!e.category)return"📛 카테고리를 선택해주세요.";const n=e.price;if(!(n!=null&&n.trim())||!L(n))return"📛 가격을 정수로 입력해주세요.";if(e.cupYn==="no"&&!e.cup)return"📛 컵 종류를 선택해주세요.";if(e.cupYn==="no"&&e.iceYn==="yes"&&!v(e.iceTime))return"📛 얼음 시간을 입력해주세요.";const s=I(e.iceTime);if(s==null||s<0||s>10)return"📛 얼음 시간은 0부터 10까지의 소수 첫째 자리까지 입력해주세요.";const o=I(e.waterTime);if(o==null||o<0||o>10)return"📛 물 시간은 0부터 10까지의 소수 첫째 자리까지 입력해주세요.";if(e.cupYn==="no"&&e.items.length===0)return"📛 음료상품은 항목을 추가해야합니다.";if(e.cupYn==="no")for(let c=0;c<e.items.length;c++){const r=e.items[c];if(!r.type)return`📛 ${c+1}번째 재료의 타입을 선택해주세요.`;if(r.type==="coffee"&&!(parseFloat(r.value1)>0||parseFloat(r.value2)>0))return"📛 원두1, 원두2 중 한개의 값은 입력해야합니다.";if(r.type!=="coffee"){if(!v(r.value1))return`📛 ${c+1}번째 재료의 첫 번째 값을 입력해주세요.`;if(!v(r.value2))return`📛 ${c+1}번째 재료의 두 번째 값을 입력해주세요.`}if(!v(r.value3))return`📛 ${c+1}번째 재료의 세 번째 값을 입력해주세요.`;if(r.type!=="garucha"&&!v(r.value4))return`📛 ${c+1}번째 재료의 네 번째 값을 입력해주세요.`}return null}function C(e){for(let t=0;t<e.items.length;t++){const n=e.items[t],s=o=>o>=1&&o<=6&&/^[0-9]+(\.[0-9]{1,2})?$/.test(String(o));if(n.type==="coffee"){if(parseFloat(n.value1)>0){if(parseFloat(n.value2))return"☕ 그라인더1 사용 시, 그라인더2는 0이어야 합니다.";if(!s(n.value1))return"☕ 그라인더1 값은 1~6 초 범위의 소수여야 합니다."}if(parseFloat(n.value2)>0){if(parseFloat(n.value1))return"☕ 그라인더2 사용 시, 그라인더1은 0이어야 합니다.";if(!s(n.value2))return"☕ 그라인더2 값은 1~6 초 범위의 소수여야 합니다."}}if(n.type==="garucha"&&parseFloat(n.value2)>0&&parseFloat(n.value3)<parseFloat(n.value2)*10)return`🍵 가루차 핫워터(${n.value3})는 추출시간(${n.value2})의 10배 이상이어야 합니다.`;if(n.type==="syrup"&&parseFloat(n.value3)<20&&parseFloat(n.value4)<20)return"🍯 시럽 핫워터 또는 탄산수 중 하나는 20 이상이어야 합니다."}return null}function g(e,t){var l;const n=(t==null?void 0:t.type)||"",s=document.createElement("div");s.className="boxStyle gr mb20 item",s.innerHTML=`
    <h2 class="mb10">${e+1}항목</h2>
    <p class="fs14">타입</p>
    <div class="btnFlex mb20">
      <select class="popup-select mb0 item-type-select">
        <option value="">선택</option>
        <option value="coffee" ${n==="coffee"?"selected":""}>커피</option>
        <option value="garucha" ${n==="garucha"?"selected":""}>가루차</option>
        <option value="syrup" ${n==="syrup"?"selected":""}>시럽</option>
      </select>
      <button class="btn red delete-btn">삭제</button>
    </div>
    ${M(n,t)}
  `,(l=s.querySelector(".delete-btn"))==null||l.addEventListener("click",()=>s.remove());const o=s.querySelector(".item-type-select");return o.addEventListener("change",()=>{const c=o.value,r=s.parentElement,i=g(e,{type:c});r.replaceChild(i,s)}),U(s),s}function M(e,t={}){return e==="coffee"?`
      <div class="input-group col mb20">
        <div><p class="fs14">원두 1</p><input type="text" value="${t.value1||"0"}" /></div>
        <div><p class="fs14">원두 2</p><input type="text" value="${t.value2||"0"}" /></div>
      </div>
      <div class="input-group col">
        <div><p class="fs14">추출량</p><input type="text" value="${t.value3||"0"}" /></div>
        <div><p class="fs14">온수</p><input type="text" value="${t.value4||"0"}" /></div>
      </div>
    `:e==="garucha"?`
      <div class="input-group col mb20">
        <div><p class="fs14">차 종류</p><input type="text" value="${t.value1||"0"}" /></div>
        <div><p class="fs14">추출 시간</p><input type="text" value="${t.value2||"0"}" /></div>
      </div>
      <div class="input-group col">
        <div><p class="fs14">온수</p><input type="text" value="${t.value3||"0"}" /></div>
        <div></div>
      </div>
    `:e==="syrup"?`
      <div class="input-group col mb20">
        <div><p class="fs14">시럽 종류</p><input type="text" value="${t.value1||"0"}" /></div>
        <div><p class="fs14">펌프 시간</p><input type="text" value="${t.value2||"0"}" /></div>
      </div>
      <div class="input-group col">
        <div><p class="fs14">온수</p><input type="text" value="${t.value3||"0"}" /></div>
        <div><p class="fs14">탄산수</p><input type="text" value="${t.value4||"0"}" /></div>
      </div>
    `:""}function U(e){const t=e.querySelectorAll("input, select");for(const n of t)n.addEventListener("blur",()=>{var a,p,u,d;const s=e,o=s.querySelector(".item-type-select").value,l=s.querySelectorAll("input"),r={items:[{type:o,value1:(a=l[0])==null?void 0:a.value,value2:(p=l[1])==null?void 0:p.value,value3:(u=l[2])==null?void 0:u.value,value4:(d=l[3])==null?void 0:d.value}]},i=C(r);i&&window.showToast(i,2e3,"error")})}const y=document.getElementById("logoPreview"),q="/img/";function m(e,t){const n=e.value;n?(t.src=`${q}${n}.png`,t.style.display="block"):t.style.display="none"}function h(e,t){e.addEventListener("change",()=>{const n=(y==null?void 0:y.src)||"";if(!(n.startsWith("blob:")||n.startsWith("data:")||n.includes("s3.ap-northeast-2.amazonaws.com"))){alert("이미지를 선택해주세요."),e.value="";return}m(e,t)})}const B=document.getElementById("state-new"),b=document.getElementById("state-event"),E=document.getElementById("state-best"),w=document.getElementById("overlay-new"),S=document.getElementById("overlay-event"),x=document.getElementById("overlay-best");h(B,w);h(b,S);h(E,x);async function D(e){const t=F();if(!t){alert("사용자 정보가 없습니다.");return}const n=await k(`/model_user_setting?func=get-user&userId=${t.userId}`),{user:s}=await n.json();A(s.category),e&&R(e)}function A(e){const t=document.getElementById("menu-category");t&&(t.innerHTML='<option value="">선택</option>',e.forEach(({name:n,item:s})=>{const o=document.createElement("option");o.value=s,o.textContent=n,t.appendChild(o)}))}function R(e){var r,i,a,p;const t=(r=e.image)==null?void 0:r.split("\\").pop(),n=encodeURIComponent(t??""),s=`https://model-narrow-road.s3.ap-northeast-2.amazonaws.com/model/${e.userId}/${n}`,o=document.getElementById("logoPreview");o&&(o.src=s,o.style.display="block");const l=document.getElementById("fileName");l&&(l.textContent=t),document.getElementById("menu-no").value=String(e.no),document.getElementById("menu-name").value=e.name,document.getElementById("menu-price").value=e.price,document.getElementById("ice-time").value=e.iceTime,document.getElementById("water-time").value=e.waterTime;const c=document.getElementById("menu-category");c&&(c.value=e.category),document.querySelectorAll('input[name="cup"]').forEach(u=>u.checked=u.value===e.cup),document.querySelectorAll('input[name="iceYn"]').forEach(u=>u.checked=u.value===e.iceYn),document.querySelectorAll('input[name="empty"]').forEach(u=>u.checked=u.value===e.empty),document.getElementById("state-new").value=((i=e.state)==null?void 0:i.new)||"",document.getElementById("state-event").value=((a=e.state)==null?void 0:a.event)||"",document.getElementById("state-best").value=((p=e.state)==null?void 0:p.best)||"",m(B,w),m(b,S),m(E,x),V(e.items)}function V(e){const t=document.getElementById("items-container");t.innerHTML="",e.forEach((n,s)=>{const o=g(s,n);t.appendChild(o)})}var $;($=document.getElementById("addItemBtn"))==null||$.addEventListener("click",()=>{const e=document.getElementById("items-container"),t=e.children.length,n=g(t);e.appendChild(n)});function H(e,t,n,s=600,o=600,l=2*1024*1024){return new Promise((c,r)=>{var u;const i=(u=e.files)==null?void 0:u[0];if(!i)return r("파일이 없습니다.");if(i.size>l)return e.value="",alert(`❌ 파일 크기는 최대 ${l/1024/1024}MB 이하여야 합니다.`),r("파일 용량 초과");const a=new Image,p=URL.createObjectURL(i);a.src=p,a.onload=()=>{if(a.width>s||a.height>o)return e.value="",alert(`❌ 이미지 사이즈는 ${s}x${o} 이하만 가능합니다.`),r("이미지 크기 초과");t.src=p,t.style.display="block",n&&(n.textContent=i.name);const d=new FileReader;d.onload=()=>{const f=d.result;t.src=f,t.style.display="block",n&&(n.textContent=i.name),c({base64:f,fileName:i.name,dataUrl:f})},d.onerror=r,d.readAsDataURL(i)},a.onerror=()=>r("이미지 로드 실패")})}export{C as a,H as h,D as r,N as v};
