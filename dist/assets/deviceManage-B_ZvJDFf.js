import{a as i}from"./apiHelpers-BXehyKPi.js";import{g as l}from"./userStorage-N8JIWYZF.js";import{s as r,a as y}from"./main-DmHAN9Wt.js";function v(){const n=l();if(!n){alert("사용자 정보가 없습니다.");return}const t=n.userId;document.querySelectorAll("a[data-func]").forEach(a=>{a.addEventListener("click",async c=>{c.preventDefault();const e=a.dataset.func,o=a.dataset.msg||"명령이 전송되었습니다",s=a.id==="coffeeWash"?{data:[{type:"coffee"}]}:a.id==="wash"?{data:[{type:"coffee"},{type:"garucha",value1:"1"},{type:"garucha",value1:"2"},{type:"garucha",value1:"3"},{type:"garucha",value1:"4"},{type:"garucha",value1:"5"},{type:"garucha",value1:"6"},{type:"syrup",value1:"1"},{type:"syrup",value1:"2"},{type:"syrup",value1:"3"},{type:"syrup",value1:"5"},{type:"syrup",value1:"6"}]}:void 0;await u(t,s?{func:e,washData:s}:{func:e},o)})}),d(t)}function d(n){document.querySelectorAll("a[data-type][data-value]").forEach(t=>{t.addEventListener("click",async a=>{a.preventDefault();const c=t.dataset.type,e=t.dataset.value,o=c==="garucha"?"가루차":"시럽";if(!c||!e)return;await u(n,{func:"wash",washData:{data:[{type:c,value1:e}]}},`부분 세척 - ${o} ${e}번`)})})}async function u(n,t,a){const c=await i(`/model_machine_registry?func=get-machine-status&userId=${n}`),{availableUrl:e,isOnline:o}=await c.json();o&&e?(r("✅ "+a),y("/model_machine_controll",{method:"POST",body:JSON.stringify({...t,userId:n})}).then(s=>{s.ok||console.warn("❌ 머신 명령 실패",s.status)}).catch(s=>{console.error("❌ 머신 통신 오류",s)})):r("❌ 머신이 오프라인입니다.",4e3,"error")}export{v as initDeviceManage,d as initPartialWash,u as sendMachineCommand};
