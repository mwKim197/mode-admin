const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./notice-edit-C-zP_XL3.js","./notice-edit-D1Buw7SL.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(t){if(t.ep)return;t.ep=!0;const n=i(t);fetch(t.href,n)}})();const _="modulepreload",w=function(o,e){return new URL(o,e).href},g={},d=function(e,i,l){let t=Promise.resolve();if(i&&i.length>0){const r=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),f=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));t=Promise.allSettled(i.map(a=>{if(a=w(a,l),a in g)return;g[a]=!0;const m=a.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(!!l)for(let h=r.length-1;h>=0;h--){const u=r[h];if(u.href===a&&(!m||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${p}`))return;const c=document.createElement("link");if(c.rel=m?"stylesheet":_,m||(c.as="script"),c.crossOrigin="",c.href=a,f&&c.setAttribute("nonce",f),document.head.appendChild(c),m)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})}))}function n(r){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=r,window.dispatchEvent(s),!s.defaultPrevented)throw r}return t.then(r=>{for(const s of r||[])s.status==="rejected"&&n(s.reason);return e().catch(n)})},y="https://api.narrowroad-model.com";async function E(o,e={}){const i=localStorage.getItem("authToken");if(!i)return window.location.pathname.includes("index.html")||window.location.pathname==="/"||(console.log("❌ 토큰이 없습니다. 로그인 페이지로 이동합니다."),window.location.href="/index.html"),{ok:!1,status:401,json:async()=>({message:"인증 토큰이 없습니다."})};const l={...e,headers:{...e.headers,Authorization:`Bearer ${i}`,"Content-Type":"application/json"}};try{const t=await fetch(`${y}${o}`,l);return t.status===401?(console.error("❌ 인증 실패: 토큰이 만료되었습니다."),localStorage.removeItem("authToken"),alert("세션이 만료되었습니다. 다시 로그인하세요."),window.location.href="/index.html",{ok:!1,status:401,json:async()=>({message:"인증 실패: 토큰이 만료되었습니다."})}):t}catch(t){return console.error("❌ API 요청 오류:",t),{ok:!1,status:500,json:async()=>({message:"❌ API 요청 오류"})}}}async function L(){const o=await E("/model_admin_login?func=me");if(!o.ok){console.warn("❌ 사용자 정보 요청 실패:",o.status);return}const e=await o.json();console.log("✅ 사용자 정보:",e);const i=e==null?void 0:e.grade;if(!i){console.warn("❌ 사용자 grade 정보가 없습니다.");return}const l={"/html/notice.html":[1,2],"/html/notice-edit.html":[1,2]},t={1:"/html/dashboard.html",2:"/html/dashboard.html",3:"/html/franchise_dashboard.html",4:"/html/store_dashboard.html"},n=window.location.pathname,r=l[n];r&&!r.includes(i)&&(alert("이 페이지에 접근할 수 있는 권한이 없습니다."),window.location.href=t[i]||"/index.html")}document.addEventListener("DOMContentLoaded",async()=>{console.log("✅ main.ts 실행됨"),await L();const o=window.location.pathname;o==="/index.html"||o==="/"?(console.log("📌 로그인 페이지 - login.ts 로드"),d(()=>import("./login-Cxi4gb_J.js"),[],import.meta.url).then(e=>{e.initLogin()})):o==="/html/register.html"?(console.log("📌 회원가입 페이지 - register.ts 로드"),d(()=>import("./register-8utZnGKU.js"),[],import.meta.url).then(e=>{e.initRegister()})):o==="/html/notice.html"?(console.log("📌 공지사항 - notice.ts 로드"),d(()=>import("./notice-Pbk6X90l.js"),[],import.meta.url).then(e=>{e.initNotice()})):o==="/html/notice-edit.html"?(console.log("📌 공지사항등록 - notice-edit.ts 로드"),d(()=>import("./notice-edit-C-zP_XL3.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>{e.initNoticeEdit()})):o==="/html/franchise_dashboard.html"?(console.log("🏘️ 프랜차이즈 - franchise.ts 로드"),d(()=>import("./franchise-BqQbRFTF.js"),[],import.meta.url).then(e=>{e.franchiseEdit()})):o==="/html/store_dashboard.html"?(console.log("📌 공지사항등록 - store_dashboard.ts 로드"),d(()=>import("./store-p9FV3yAN.js"),[],import.meta.url).then(e=>{e.storeEdit()})):console.log("📌 기본 페이지")});export{E as f};
