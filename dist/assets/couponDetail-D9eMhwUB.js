import{g as I,a as p}from"./main-DhEZJ_Ft.js";function B(){console.log("쿠폰 발행 페이지 초기화"),v();const e=document.getElementById("back-to-list");e&&e.addEventListener("click",function(){window.location.href="/html/couponList.html"});const s=document.getElementById("coupon-form");s&&s.addEventListener("submit",function(i){var a,c,u,d,l,m,w;i.preventDefault();const t=(a=document.getElementById("franchise-input"))==null?void 0:a.value.trim(),n=(c=document.getElementById("store-input"))==null?void 0:c.value.trim(),o=(u=document.getElementById("device-input"))==null?void 0:u.value.trim(),r=(d=document.getElementById("start-date"))==null?void 0:d.value.trim(),f=(l=document.getElementById("end-date"))==null?void 0:l.value.trim(),h=(m=document.getElementById("issue-count"))==null?void 0:m.value.trim(),g=(w=document.getElementById("sample"))==null?void 0:w.value.trim();if(!t){window.showToast("가맹점을 입력해 주세요",2e3,"warning");return}if(!n){window.showToast("지점을 입력해 주세요",2e3,"warning");return}if(!o){window.showToast("기기번호를 입력해 주세요",2e3,"warning");return}if(!r){window.showToast("사용기한(시작일)을 입력해 주세요",2e3,"warning");return}if(!f){window.showToast("사용기한(종료일)을 입력해 주세요",2e3,"warning");return}if(!h){window.showToast("발행매수를 입력해 주세요",2e3,"warning");return}if(!g){window.showToast("쿠폰을 선택해 주세요",2e3,"warning");return}window.location.href="/html/couponList.html"})}async function v(){try{const e=I();if(!e)return;const t=(await(await p(`/model_user_setting?func=get-user&userId=${e.userId}`)).json()).user.storeName,n=document.getElementById("franchise-input"),o=document.getElementById("store-input"),r=document.getElementById("device-input");n&&(n.value=t),o&&(o.value=t),r&&(r.value=e.userId),await E(e.userId)}catch(e){console.error("사용자 데이터 로드 실패:",e)}}async function E(e){try{const i=await(await p(`/model_admin_menu?userId=${e}&func=get-all-menu`)).json(),t=document.getElementById("sample");t&&i.items&&(t.innerHTML='<option value="">쿠폰을 선택해주세요</option>',i.items.forEach(n=>{if(!n.menuId||!n.name)return;const o=document.createElement("option");o.value=n.menuId,o.textContent=n.name,t.appendChild(o)}),new window.Choices(t,{shouldSort:!1,searchEnabled:!1,position:"auto",classNames:{containerOuter:"custom-select",containerInner:"custom-select-inner",input:"custom-select-input",itemChoice:"custom-select-item",listDropdown:"custom-select-dropdown",placeholder:"custom-select-placeholder"}}))}catch(s){console.error("메뉴 데이터 로드 실패:",s)}}export{B as initCouponDetail};
