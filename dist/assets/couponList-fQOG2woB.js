import{g as r,a as u}from"./main-CJPm9qUt.js";function l(){if(console.log("✅ coupon.ts 로드됨"),!r()){window.showToast("❌ 사용자 정보가 없습니다.",3e3,"error");return}}function m(){console.log("쿠폰 목록 페이지 초기화"),a();const e=document.getElementById("open-popup"),o=document.getElementById("close-popup"),t=document.getElementById("popup");e&&t&&e.addEventListener("click",function(){t.style.display="flex"}),o&&t&&o.addEventListener("click",function(){t.style.display="none"}),t&&t.addEventListener("click",function(n){n.target===this&&(this.style.display="none")})}async function a(){try{const e=r();if(!e)return;const n=(await(await u(`/model_user_setting?func=get-user&userId=${e.userId}`)).json()).user.storeName,c=document.getElementById("franchise-input"),s=document.getElementById("store-input"),i=document.getElementById("device-input");c&&(c.value=n),s&&(s.value=n),i&&(i.value=e.userId),await p(e.userId)}catch(e){console.error("사용자 데이터 로드 실패:",e)}}async function p(e){try{const t=await(await u(`/model_admin_menu?userId=${e}&func=get-all-menu`)).json(),n=document.getElementById("coupon-type-select");n&&t.items&&(n.innerHTML='<option value="">--선택--</option>',t.items.forEach(c=>{const s=document.createElement("option");s.value=c.menuId,s.textContent=c.name,n.appendChild(s)}))}catch(o){console.error("메뉴 데이터 로드 실패:",o)}}export{l as initCoupon,m as initCouponList};
