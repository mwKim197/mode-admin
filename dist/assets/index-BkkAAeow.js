(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const m="https://api.narrowroad-model.com";async function u(r,i={}){const o=localStorage.getItem("authToken");if(!o)return window.location.pathname.includes("index.html")||window.location.pathname==="/"||(console.log("âŒ í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ íŽ˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤."),window.location.href="/index.html"),null;const a={...i,headers:{...i.headers,Authorization:`Bearer ${o}`,"Content-Type":"application/json"}};try{const e=await fetch(`${m}/model_admin_login${r}`,a);if(e.status===401)return console.error("âŒ ì¸ì¦ ì‹¤íŒ¨: í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤."),localStorage.removeItem("authToken"),alert("ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì„¸ìš”."),window.location.href="/index.html",null;if(!e.ok)throw new Error(`âŒ ìš”ì²­ ì‹¤íŒ¨: ${e.statusText}`);return await e.json()}catch(e){return console.error("âŒ API ìš”ì²­ ì˜¤ë¥˜:",e),null}}async function h(){const r=await u("?func=me");r?console.log("âœ… ì‚¬ìš©ìž ì •ë³´:",r):console.log("âŒ ì‚¬ìš©ìž ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.")}const c="https://api.narrowroad-model.com";document.addEventListener("DOMContentLoaded",()=>{console.log("âœ… login.ts íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.");const r=document.getElementById("login-form");if(!r){console.error("âŒ ë¡œê·¸ì¸ í¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}r.addEventListener("submit",async i=>{i.preventDefault();const o=document.getElementById("adminId").value.trim(),a=document.getElementById("password").value.trim();if(!o||!a){alert("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•´ì£¼ì„¸ìš”.");return}try{const e=await fetch(`${c}/model_admin_login?func=login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:o,password:a}),mode:"cors"}),t=await e.json();e.ok?(localStorage.setItem("authToken",t.token),console.log("âœ… ë¡œê·¸ì¸ ì„±ê³µ â†’ í† í° ì €ìž¥ ì™„ë£Œ!"),window.location.href="/html/main.html"):alert(t.message||"ë¡œê·¸ì¸ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.")}catch(e){console.error("âŒ ë¡œê·¸ì¸ ì˜¤ë¥˜:",e),alert("ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.")}})});var l;(l=document.getElementById("kakao-login-btn"))==null||l.addEventListener("click",()=>{const o="https://kauth.kakao.com/oauth/authorize?response_type=code&client_id=240886095629b93f9655026145a39487&redirect_uri=http://model-web-admin.s3-website.ap-northeast-2.amazonaws.com/html/kakao-callback.html";if(window.innerWidth<=768||/Mobi|Android/i.test(navigator.userAgent))console.log("ðŸ“± ëª¨ë°”ì¼ í™˜ê²½ â†’ ë¦¬ë””ë ‰íŠ¸ ë°©ì‹ ì‚¬ìš©"),window.location.href=o;else{console.log("ðŸ’» PC í™˜ê²½ â†’ íŒì—… ë¡œê·¸ì¸ ì‚¬ìš©");const e=window.open(o,"kakaoLogin","width=500,height=700");window.addEventListener("message",t=>{if(t.origin!=="http://model-web-admin.s3-website.ap-northeast-2.amazonaws.com")return;const{code:s}=t.data;s&&(console.log("âœ… ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì½”ë“œ ë°›ìŒ:",s),e==null||e.close(),fetch(`${c}/model_admin_login?func=kakao-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:s})}).then(n=>n.json().then(d=>({status:n.status,body:d}))).then(({body:n})=>{n.token?(localStorage.setItem("authToken",n.token),console.log("âœ… ë¡œê·¸ì¸ ì„±ê³µ â†’ í† í° ì €ìž¥ ì™„ë£Œ!"),window.location.href="/html/main.html"):n.redirectUrl?(console.log("âœ… ì‹ ê·œ ì‚¬ìš©ìž â†’ ì—°ë™ íŽ˜ì´ì§€ë¡œ ì´ë™:",n.redirectUrl),window.location.href=n.redirectUrl):alert("ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.")}).catch(n=>{console.error("âŒ ë¡œê·¸ì¸ ì˜¤ë¥˜:",n)}))})}});document.addEventListener("DOMContentLoaded",()=>{h()});
