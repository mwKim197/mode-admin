import{g as f}from"./userStorage-DqYcZspP.js";import{a as p}from"./apiHelpers-Cj0oONL2.js";import"./main-oRYtEfGT.js";const l=document.getElementById("state-new"),m=document.getElementById("state-event"),d=document.getElementById("state-best"),v=document.getElementById("overlay-new"),I=document.getElementById("overlay-event"),E=document.getElementById("overlay-best"),B="/img/";function s(e,t){const n=e.value;n?(t.src=`${B}${n}.png`,t.style.display="block"):t.style.display="none"}l.addEventListener("change",()=>s(l,v));m.addEventListener("change",()=>s(m,I));d.addEventListener("change",()=>s(d,E));async function k(){const e=f();if(!e){alert("사용자 정보가 없습니다.");return}const t=w("menuId");if(!t){alert("menuId가 누락되었습니다.");return}try{const n=await p(`/model_user_setting?func=get-user&userId=${e.userId}`),{user:a}=await n.json();h(a.category);const r=await(await p(`/model_admin_menu?userId=${e.userId}&menuId=${t}&func=get-menu-by-id`)).json();S(r),console.log("✅ 상세 데이터 적용 완료",r)}catch(n){console.error("❌ 메뉴 상세 로딩 실패:",n),alert("메뉴 정보를 불러오는 데 실패했습니다.")}}function w(e){return new URLSearchParams(window.location.search).get(e)}function h(e){const t=document.getElementById("menu-category");t&&(t.innerHTML='<option value="">선택</option>',e.forEach(({name:n,item:a})=>{const c=document.createElement("option");c.value=a,c.textContent=n,t.appendChild(c)}))}function S(e){var u,i,y,g;const t=(u=e.image)==null?void 0:u.split("\\").pop(),n=`https://model-narrow-road.s3.ap-northeast-2.amazonaws.com/model/${e.userId}/${t}`,a=document.getElementById("logoPreview");a&&(a.src=n,a.style.display="block");const c=document.getElementById("fileName");c&&(c.textContent=t),document.getElementById("menu-no").value=String(e.no),document.getElementById("menu-name").value=e.name,document.getElementById("menu-price").value=e.price,document.getElementById("ice-time").value=e.iceTime,document.getElementById("water-time").value=e.waterTime;const r=document.getElementById("menu-category");r&&(r.value=e.category),document.querySelectorAll('input[name="cup"]').forEach(o=>o.checked=o.value===e.cup),document.querySelectorAll('input[name="iceYn"]').forEach(o=>o.checked=o.value===e.iceYn),document.querySelectorAll('input[name="empty"]').forEach(o=>o.checked=o.value===e.empty),document.getElementById("state-new").value=((i=e.state)==null?void 0:i.new)||"",document.getElementById("state-event").value=((y=e.state)==null?void 0:y.event)||"",document.getElementById("state-best").value=((g=e.state)==null?void 0:g.best)||"",s(l,v),s(m,I),s(d,E)}export{k as initProductDetail};
