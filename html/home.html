<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/src/css/reset.css">
  <link rel="stylesheet" href="/src/css/common.css">
  <link rel="stylesheet" href="/src/css/style.css">
  <script type="module" src="/src/main.ts"></script> <!-- ✅ 메인 진입 -->
</head>

<body>
  <!-- 메인 -->
  <div id="main-content">

    <!-- 커피봇 -->
    <section class="mt8">
      <div class="inner">
        <div class="user-flex">
          <div class="user">
            <i class="fa-regular fa-circle-user"></i>
            <p id="user-name">zero001 님</p>
            <label class="label manager" id="user-grade"><span>총괄관리자</span></label>
          </div>
        </div>
      </div>
    </section>

    <!-- 당월매출 -->
    <section class="pb20">
      <div class="inner">
        <div class="notice-slider-wrapper overflow-hidden">
          <div class="notice-slider" id="noticeSlider">
            <div class="notice-item box flex gap-1 mb20">
              <img src="/img/notice_icon.svg" alt="">
              <label class="tag red none-bg">긴급</label>
              <p>02-23 / <br class="br-s">2.01버전 패치사항 안내</p>
            </div>
            <div class="notice-item box flex gap-1 mb20">
              <img src="/img/notice_icon.svg" alt="">
              <label class="tag blue none-bg">패치</label>
              <p>03-01 / <br class="br-s">신규 기능 추가 안내</p>
            </div>
            <div class="notice-item box flex gap-1 mb20">
              <img src="/img/notice_icon.svg" alt="">
              <label class="tag org none-bg">이벤트</label>
              <p>04-10 / <br class="br-s">봄맞이 이벤트 시작</p>
            </div>
          </div>
        </div>
        
          <div class="boxStyle bl">
            <div class="countArea">
              <div class="countbox mb10">
                <p>당일 매출</p>
                <h4 data-target="87000"><span class="number">0000000</span><small>원</small></h4>
              </div>
              <div class="countbox">
                <p>전일 매출</p>
                <h4 data-target="240000"><span class="number">0000000</span><small>원</small></h4>
              </div>
              <hr class="borderSt-dot">
              <div class="flex">
                <div class="countbox St2">
                  <p>당월 매출</p>
                  <h4 data-target="2600000"><span class="number">0000000</span><small>원</small></h4>
                </div>
                <div class="countbox St2">
                  <p>최고 매출</p>
                  <h4 data-target="250000"><span class="number">0000000</span><small>원</small></h4>
                </div>
              </div>

            </div>
          </div>
        </div>
    </section>

    <!-- 빠른재고 -->
    <!--<section>[TODO] 2차개발
      <div class="inner">
        <div class=" boxStyle wt">

          <div class="title-flex mb20">
            <h2>빠른재고</h2>
            <button class="btn-outline">전체채우기</button>
          </div>
          <div class="progress-container">
            <div class="protext">가루차1</div>
            <div class="progress-bar">
              <div class="progress-fill fill1">0%</div>
            </div>
            <button class="refresh-btn" onclick="replayAnimation(0)"><img src="/img/refresh.svg" alt=""></button>
          </div>

          <div class="progress-container">
            <div class="protext">액상2</div>
            <div class="progress-bar">
              <div class="progress-fill fill2">0%</div>
            </div>
            <button class="refresh-btn" onclick="replayAnimation(1)"><img src="/img/refresh.svg" alt=""></button>
          </div>

          <div class="progress-container">
            <div class="protext">액상3</div>
            <div class="progress-bar">
              <div class="progress-fill fill3">0%</div>
            </div>
            <button class="refresh-btn" onclick="replayAnimation(2)"><img src="/img/refresh.svg" alt=""></button>
          </div>

          <div class="progress-container">
            <div class="protext">플라스틱컵</div>
            <div class="progress-bar">
              <div class="progress-fill fill4">0%</div>
            </div>
            <button class="refresh-btn" onclick="replayAnimation(3)"><img src="/img/refresh.svg" alt=""></button>
          </div>
        </div>
      </div>
    </section>-->

    <!-- 공지사항 -->
    <section>
      <div class="inner">
        <div class=" boxStyle wt mb20">
          <h2 class="ta-c mb20">공지사항</h2>
          <div class="notice-flex">
            <div class="box">
              <div class="num">1</div>
              <label class="tag red">긴급</label>
              <div class="textBox">
                <h4>[소프트웨어] 2월 18일 (화) 업데이트 공지</h4>
                <span>2024.12.10 11:11:11</span>
              </div>
            </div>
            <div class="box">
              <div class="num">2</div>
              <label class="tag blue">패치</label>
              <div class="textBox">
                <h4>2025년 메일빈 제품별 변동 사항관련 공지
                </h4>
                <span>2024.12.10 11:11:11</span>
              </div>
            </div>
            <div class="box">
              <div class="num">3</div>
              <label class="tag org">이벤트</label>
              <div class="textBox">
                <h4>당사 건물 화재로 인한 전화 응대관련 공지</h4>
                <span>2024.12.10 11:11:11</span>
              </div>
            </div>
            <div class="box">
              <div class="num">4</div>
              <label class="tag">안내</label>
              <div class="textBox">
                <h4>크리스마스 및 연말 배송 안내 관련 공지</h4>
                <span>2024.12.10 11:11:11</span>
              </div>
            </div>
            <div class="box">
              <div class="num">5</div>
              <label class="tag red">긴급</label>
              <div class="textBox">
                <h4>[소프트웨어] 2월 18일 (화) 업데이트 공지</h4>
                <span>2024.12.10 11:11:11</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

</body>

<script>
// 매출 카운팅
document.addEventListener("DOMContentLoaded", () => {
  const counters = document.querySelectorAll(".countbox h4");

  counters.forEach((counter) => {
    const target = +counter.getAttribute("data-target").replace(/,/g, "");
    const numberSpan = counter.querySelector(".number");

    const totalDigits = target.toLocaleString().replace(/,/g, "").length;

    const updateCount = () => {
      let current = +numberSpan.innerText.replace(/[^0-9]/g, "") || 0;
      const increment = Math.ceil(target / 100);

      if (current < target) {
        current += increment;
        if (current > target) current = target;

        numberSpan.innerText = formatWithPadding(current, totalDigits);
        setTimeout(updateCount, 20);
      } else {
        numberSpan.innerText = formatWithPadding(target, totalDigits);
      }
    };

    const formatWithPadding = (num, width) => {
      const numStr = num.toLocaleString(); // adds commas
      const plainNum = num.toString().padStart(width, "0");
      return plainNum.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    };

    updateCount();
  });
});

// notice 스와이퍼
const slider = document.getElementById('noticeSlider');
  const items = slider.children;
  const totalItems = items.length;

  let index = 0;

  // 복제 첫 슬라이드 (무한 루프용)
  const firstClone = items[0].cloneNode(true);
  slider.appendChild(firstClone);

  function slideNext() {
    index++;
    slider.style.transition = "transform 0.5s ease-in-out";
    slider.style.transform = `translateX(-${index * 100}%)`;

    // 마지막 복제 슬라이드까지 갔을 때 처음으로 리셋
    if (index === totalItems) {
      setTimeout(() => {
        slider.style.transition = "none";
        slider.style.transform = "translateX(0)";
        index = 0;
      }, 600); // transition 시간보다 살짝 길게
    }
  }

  setInterval(slideNext, 5000); // 3초마다 전환
</script>

</html>